<% include ../include/headcss.ejs %>

<body ng-app="b2clogin">

<b2c-header showlogin="true"></b2c-header>


    <div class="b2c-top-line">
        <div class="b2c-container">
          <label><i class="glyphicon glyphicon-lock"></i>安全中心</label>
          <span>找回密码</span>
          <a href="/e4e/forgotpassword">输入邮箱</a>
            &gt;
          <a href="" class="active">重设密码</a>
            &gt;
          <a href="#">完成</a>
        </div>
    </div>

    <div class="middle b2c-container" ng-controller="userLoginController as resetPassword">
        <div class="b2c-enter-code">
            <div class="row" >
                <div class="col-md-5">
                    <div class="b2c-code"></div>
                </div>

                <div class="col-md-5" ng-if="resetPassword.css.resetPasswordForm == 'tokenForm' ">

                    <form name="forgetPasswordForm" novalidate ng-cloak>
                        <h4><strong>请查看您 <%= useremail %> 的邮箱, 并填入以下验证码：</strong></h4>

                        <div class="form-group">
                            <span class="err-msg" ng-if="forgetPasswordForm.password.$dirty&&forgetPassword.css.resetPasswordTokenNotExistedInfo">验证码不正确!</span>
                            <span class="err-msg" ng-if="forgetPasswordForm.password.$dirty&&forgetPasswordForm.password.$error.minlength || forgetPasswordForm.password.$dirty&&forgetPasswordForm.password.$error.maxlength">长度为6个字符!</span>
                        </div>

                        <div class="form-group has-feedback" ng-class="{'has-success':forgetPasswordForm.password.$dirty&&forgetPasswordForm.password.$valid, 'has-error':forgetPasswordForm.password.$dirty&&forgetPasswordForm.password.$invalid}">
                            <input class="input-lg form-control" type="text" name="password" autofocus="autofocus" placeholder="######" ng-model="resetPassword.newUser.passwordResetVerifyCode" required  ng-minlength="6" ng-maxlength="6"/>
                            <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" ng-if="forgetPasswordForm.password.$dirty&&forgetPasswordForm.password.$valid"></span>
                            <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" ng-if="forgetPasswordForm.password.$dirty&&forgetPasswordForm.password.$invalid"></span>
                        </div>
                        <p><button class="btn btn-default" ng-click="resetPassword.clickForgetPasswordStep2(forgetPasswordForm)">确&nbsp;&nbsp;认</button></p>
                    </form>

                    <hr/>

                    <h4><strong> 没有收到验证码？</strong></h4>
                    <div class="text-left">
                        &gt;<span>查看邮箱回收站、垃圾邮件</span>
                        <br/>
                        &gt;<a class="text-danger" href="/e4e/forgotpassword" target="_self">重新发送邮件</a>
                    </div>

                </div>


                <div class="col-md-5" ng-if="resetPassword.css.resetPasswordForm == 'inputPasswordForm' ">
                    <form name="resetPasswordForm2" novalidate ng-cloak>
                        <h4><strong>重置新密码：</strong></h4>

                        <div class="form-group">
                            <span class="err-msg" ng-if="resetPasswordForm2.password.$dirty&&forgetPassword.css.resetPasswordTokenNotExistedInfo">验证码不正确!</span>
                            <span class="err-msg" ng-if="resetPasswordForm2.password.$dirty&&resetPasswordForm2.password.$error.minlength || resetPasswordForm2.password.$dirty&&resetPasswordForm2.password.$error.maxlength">长度为6个字符!</span>
                        </div>

                        <div class="form-group has-feedback" ng-class="{'has-success':regForm.password.$dirty&&regForm.password.$valid, 'has-error':regForm.password.$dirty&&regForm.password.$invalid}">
                            <input class="input-lg form-control" type="password" name="password" placeholder="密码" ng-model="register.newUser.password" required ng-minlength="6" ng-maxlength="20"/>
                            <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" ng-if="regForm.password.$dirty&&regForm.password.$valid"></span>
                            <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" ng-if="regForm.password.$dirty&&regForm.password.$invalid"></span>
                            <span class="err-msg" ng-if="regForm.password.$dirty&&regForm.password.$invalid">请输入正确的密码 6-20个字符!</span>
                        </div>

                        <div class="form-group has-feedback" ng-class="{'has-success':regForm.passwordreinput.$dirty&&regForm.passwordreinput.$valid, 'has-error':regForm.passwordreinput.$dirty&&regForm.passwordreinput.$invalid}">
                            <input class="input-lg form-control" type="password" name="passwordreinput" placeholder="再次输入密码" ng-model="register.newUser.passwordreinput" required ng-match="register.newUser.password"/>
                            <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true" ng-if="regForm.passwordreinput.$dirty&&regForm.passwordreinput.$valid"></span>
                            <span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true" ng-if="regForm.passwordreinput.$dirty&&regForm.passwordreinput.$invalid"></span>
                            <span class="err-msg" ng-if="regForm.passwordreinput.$dirty&&regForm.passwordreinput.$invalid">请输入正确的再次输入密码!</span>
                        </div>

                        <div class="form-group"><button class="btn btn-default" type="submit" ng-click="resetPassword.clickForgetPasswordStep2(regForm)" >重置密码</button></div>
                    </form>

                </div>


            </div>
        </div>
    </div>


<% include ../include/footerscriptlogin.ejs %>