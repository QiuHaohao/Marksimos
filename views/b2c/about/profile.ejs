    <% include ../include/headcss.ejs %>


    <body ng-app="b2clogin" class="profile-body" ng-controller="profileController as profile">

    <b2c-header currentuser="profile.currentUser"></b2c-header>

    <div class="profile-main" >
        <div class="container-fluid profile-content" ng-cloak>
            <header class="row">
                <div class="col-xs-12">
                    <div class="banner"></div>
                    <div class="user-info">
                        <img ng-src="/{{profile.currentUser.avatar.path || profile.css.defaultAvatar}}" class="profile-head"/>
                        <div class="text-info">
                            <div class="profile-username">{{profile.currentUser.username}}</div>
                            <div class="profile-school-name">{{profile.currentUser.organizationOrUniversity}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <nav class="col-md-6 col-md-offset-2">
                            <div class="row">
                                <!--<div class="col-md-4"><span>{{'个人主页' | translate}}</span></div>-->
                                <div class="col-md-6"><span class="selected">{{'ProfilePageHeaderTitle' | translate}}</span></div>
                                <!--<div class="col-md-4"><span>{{'更多' | translate}}</span><span class="small-down-triangle"></span></div>-->
                            </div>
                        </nav>
                    </div>
                </div>
            </header>

            <section class="row profile-section">
                <aside class="col-md-4 detail-nav">
                    <img class="avatar" ng-src="/{{profile.currentUser.avatar.path || profile.css.defaultAvatar}}" />

                    <nav class="profile-nav">
                        <ul><!--['{{'上传头像' | translate}}', '{{'基本信息' | translate}}', '{{'安全信息' | translate}}', '{{'学校信息' | translate}}', '{{'团队信息' | translate}}', '{{'联系方式' | translate}}']-->
                            <li ng-class="{selected: profile.css.currentTab == 'uploadAvatar'}" ng-click="profile.clickSwitchTab('uploadAvatar')">{{'ProfilePageTabUploadAvatar' | translate}}</li>
                            <li ng-class="{selected: profile.css.currentTab == 'basicInfo'}" ng-click="profile.clickSwitchTab('basicInfo')">{{'ProfilePageTabBasicInfo' | translate}}</li>
                            <li ng-class="{selected: profile.css.currentTab == 'schoolInfo'}" ng-click="profile.clickSwitchTab('schoolInfo')">{{'ProfilePageTabSchoolInfo' | translate}}</li>
                            <li ng-class="{selected: profile.css.currentTab == 'experienceInfo'}" ng-click="profile.clickSwitchTab('experienceInfo')">{{'ProfilePageTabExperienceInfo' | translate}}</li>
                            <li ng-class="{selected: profile.css.currentTab == 'societyExperienceInfo'}" ng-click="profile.clickSwitchTab('societyExperienceInfo')">{{'ProfilePageTabSocietyExperienceInfo' | translate}}</li>
                            <li ng-class="{selected: profile.css.currentTab == 'securityInfo'}" ng-click="profile.clickSwitchTab('securityInfo')">{{'ProfilePageTabSecurityInfo' | translate}}</li>
                            <li ng-class="{selected: profile.css.currentTab == 'teamInfo'}" ng-click="profile.clickSwitchTab('teamInfo')">{{'ProfilePageTabTeamInfo' | translate}}</li>
                        </ul>
                    </nav>
                </aside>
                <article class="col-md-8 profile-detail">
                    <div class="row alert-container">
                        <div id="profile-alert-container"></div>
                        <script type="text/ng-template" id="profile-alert-success.html">
                            <div class="alert alert-success">
                                <span>{{'ProfilePageAlertSaveSuccessful' | translate}}</span>
                            </div>
                        </script>
                        <script type="text/ng-template" id="profile-alert-failed.html">
                            <div class="alert alert-danger">
                                <span>{{'ProfilePageAlertSaveFailed' | translate}}</span>
                            </div>
                        </script>
                        <script type="text/ng-template" id="profile-alert-invalid-password.html">
                            <div class="alert alert-danger">
                                <span>{{'ProfilePageAlertInvalidPassword' | translate}}</span>
                            </div>
                        </script>
                    </div>
                    <div class="row" ng-if="profile.css.currentTab == 'uploadAvatar'">
                        <div class="file-input-wrapper glyphicon glyphicon-plus center-block">
                            <span class="file-upload-text">{{'ProfilePageUploadAvatarSelectionButton' | translate}}</span>
                            <div class="wrapper">
                                <input class="file-input" type="file" nv-file-select uploader="profile.uploader" accept=".jpg,.png,.jpeg,.bmp,.gif"/>
                            </div>
                        </div>
                        <ul class="center-block preview-avatar profile-button-container">
                            <li ng-repeat="item in profile.uploader.queue">
                                <div ng-thumb="{ file: item._file}"></div>
                                <button type="submit" class="center-block" ng-click="item.upload()">{{'ProfilePageUploadAvatarSelectionButton' | translate}}</button>
                            </li>
                        </ul>
                    </div>

                    <div class="row" ng-if="profile.css.currentTab == 'basicInfo'">
                        <profile-basic-info-form current-user="profile.currentUser" update="profile.updateBasicInfo(data)"></profile-basic-info-form>
                    </div>

                    <div class="row education-background" ng-if="profile.css.currentTab == 'schoolInfo'">
                        <div class="profile-detail-title">{{'ProfilePageTabSchoolInfo' | translate}}<span class="profile-edit" ng-click="profile.clickSetEditingState({educationEditing: true, languageEditing: false, addLanguageEditing: false})">{{'ProfilePageEditButton' | translate}}</span></div>
                        <form novalidate name="schoolForm" class="form-horizontal">
                            <div class="education" ng-repeat="education in profile.formData.eductionBackgrounds">
                                <h3>{{'ProfilePageEducation' | translate}} {{$index + 1}}:<span ng-click="profile.clickDeleteEducation($index)" ng-if="profile.css.educationEditing" class="form-control-static remove-button glyphicon glyphicon-minus button"></span></h3>
                                <div>
                                    <div class="form-group" ng-class="{'has-success':schoolForm['school' + $index].$dirty&&schoolForm['school' + $index].$valid, 'has-error':schoolForm['school' + $index].$dirty&&schoolForm['school' + $index].$invalid}">
                                        <label for="school{{$index}}" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoCollege' | translate}} :</label>
                                        <div class="col-xs-5" ng-if="!profile.css.educationEditing">
                                            <p class="form-control-static">{{profile.currentUser.eductionBackgrounds[$index].university}}&nbsp</p>
                                        </div>
                                        <div class="col-xs-5" ng-if="profile.css.educationEditing">
                                            <input required type="text" ng-model="profile.formData.eductionBackgrounds[$index].university" name="school{{$index}}" id="school{{$index}}" class="form-control">
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm['school' + $index].$dirty && schoolForm['school' + $index].$invalid">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="row form-group" ng-class="{'has-success':schoolForm['degree' + $index].$dirty&&schoolForm['degree' + $index].$valid, 'has-error':schoolForm['degree' + $index].$dirty&&schoolForm['degree' + $index].$invalid}">
                                        <label for="degree{{$index}}" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoDegree' | translate}} :</label>
                                        <div class="col-xs-5" ng-if="!profile.css.educationEditing">
                                            <p class="form-control-static">{{profile.currentUser.eductionBackgrounds[$index].degree}}&nbsp</p>
                                        </div>
                                        <div class="col-xs-5" ng-if="profile.css.educationEditing">
                                            <input required type="text" ng-model="profile.formData.eductionBackgrounds[$index].degree" id="degree{{$index}}" name="degree{{$index}}" class="col-md-2 form-control">
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm['degree' + $index].$dirty && schoolForm['degree' + $index].$invalid">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="row form-group" ng-class="{'has-success':schoolForm['major' + $index].$dirty&&schoolForm['major' + $index].$valid, 'has-error':schoolForm['major' + $index].$dirty&&schoolForm['major' + $index].$invalid}">
                                        <label for="major{{$index}}" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoMajor' | translate}} :</label>
                                        <div class="col-xs-5" ng-if="!profile.css.educationEditing">
                                            <p class="form-control-static">{{profile.currentUser.eductionBackgrounds[$index].major | major | translate}}&nbsp</p>
                                        </div>
                                        <div class="col-xs-5" ng-if="profile.css.educationEditing">
                                            <input required id="major{{$index}}" name="major{{$index}}" type="hidden" ng-model="profile.formData.eductionBackgrounds[$index].major">
                                            <div class="row">
                                                <p class="col-xs-8 form-control-static">{{profile.formData.eductionBackgrounds[$index].major | major | translate}}&nbsp;</p>
                                                <div class="col-xs-4"><button class="btn btn-default form-control" ng-click="profile.css.currentMajor=$index">{{'ProfilePageSelectButton' | translate}}</button></div>
                                            </div>
                                            <div muti-select selectfitler="major" datasource="profile.Constant.educationMajor" show="$index == profile.css.currentMajor"  selectclick="profile.clickHideMutiSelect()" close="profile.clickHideMutiSelect()" ng-model="profile.formData.eductionBackgrounds[$index].major"></div>
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm['major' +  $index].$dirty && schoolForm['major' + $index].$invalid">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="row form-group" ng-class="{'has-error': schoolForm['entryDate' +  $index].$dirty && schoolForm['entryDate' +  $index].$invalid, 'has-success':schoolForm['entryDate' +  $index].$dirty && schoolForm['entryDate' +  $index].$valid}">
                                        <label for="entryDate{{$index}}" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoEnterDate' | translate}} :</label>
                                        <div class="col-xs-3" ng-if="!profile.css.educationEditing">
                                            <p class="form-control-static">{{profile.currentUser.eductionBackgrounds[$index].entryDate|date:"yyyy-MM-dd"}}&nbsp</p>
                                        </div>
                                        <div class="col-xs-5" ng-if="profile.css.educationEditing">
                                            <input required type="text" data-date-format="yyyy-MM-dd" data-min-date="02/10/70" data-max-date="today" data-autoclose="1" ng-model="profile.formData.eductionBackgrounds[$index].entryDate" id="entryDate{{$index}}" name="entryDate{{$index}}" class="form-control" bs-datepicker>
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm['entryDate' +  $index].$dirty && schoolForm['entryDate' +  $index].$error.date">{{'ProfilePageDateFormatError' | translate}}</span>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm['entryDate' +  $index].$dirty && schoolForm['entryDate' +  $index].$error.required">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="row form-group" ng-class="{'has-error': schoolForm['graduationDate' +  $index].$dirty && schoolForm['graduationDate' + $index].$invalid, 'has-success':schoolForm['graduationDate' + $index].$dirty&&schoolForm['graduationDate' + $index].$valid}">
                                        <label for="graduationDate{{$index}}" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoGraduationDate' | translate}} :</label>
                                        <div class="col-xs-3" ng-if="!profile.css.educationEditing">
                                            <p class="form-control-static">{{profile.currentUser.eductionBackgrounds[$index].graduationDate|date:"yyyy-MM-dd"}}&nbsp</p>
                                        </div>
                                        <div class="col-xs-5" ng-if="profile.css.educationEditing">
                                            <input required type="text" data-date-format="yyyy-MM-dd" data-min-date="{{profile.formData.eductionBackgrounds[$index].entryDate}}" data-autoclose="1" ng-model="profile.formData.eductionBackgrounds[$index].graduationDate" id="graduationDate{{$index}}" name="graduationDate{{$index}}" class="form-control" bs-datepicker>
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm['graduationDate' +  $index].$dirty && schoolForm['graduationDate' + $index].$error.date">{{'ProfilePageDateFormatError' | translate}}</span>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm['graduationDate' +  $index].$dirty && schoolForm['graduationDate' +  $index].$error.required">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="form-group">
                                        <label for="abroad{{$index}}" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoAbroad' | translate}} :</label>
                                        <div class="col-xs-9" ng-if="!profile.css.educationEditing">
                                            <pre class="form-control-static">{{profile.currentUser.eductionBackgrounds[$index].abroad}}&nbsp</pre>
                                        </div>
                                        <div class="col-xs-9" ng-if="profile.css.educationEditing">
                                            <div class="row">
                                                <div class="col-xs-11">
                                                    <textarea placeholder="{{'ProfilePageSchoolInfoAbroadInfo' | translate}}" rows="3" ng-model="profile.formData.eductionBackgrounds[$index].abroad" name="abroad{{$index}}" id="abroad{{$index}}" class="form-control"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="achievements{{$index}}" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoAchievements' | translate}} :</label>
                                        <div class="col-xs-9" ng-if="!profile.css.educationEditing">
                                            <pre class="form-control-static" ng-repeat="achievement in profile.currentUser.eductionBackgrounds[$index].achievements">{{achievement.description}}</pre>
                                        </div>
                                        <div class="col-xs-9" ng-if="profile.css.educationEditing">
                                            <div class="row" ng-repeat="achievement in profile.formData.eductionBackgrounds[$parent.$index].achievements">
                                                <div class="col-xs-11">
                                                    <textarea rows="3" ng-model="achievement.description" name="achievements{{$parent.$index}}{{$index}}" class="form-control"></textarea>
                                                </div>
                                                <div class="col-xs-1">
                                                    <span ng-click="profile.formData.eductionBackgrounds[$parent.$index].achievements.splice($index, 1)" class="form-control-static remove-button glyphicon glyphicon-minus button"></span>
                                                </div>
                                            </div>
                                            <div ng-if="!profile.css.saving" class="row">
                                                <div class="col-xs-11">
                                                    <textarea rows="3" ng-model="education._newAchievement.description" name="newAchievement" id="newAchievement" class="form-control"></textarea>
                                                </div>
                                                <div class="col-xs-1" ng-if="education._newAchievement">
                                                    <span ng-click="profile.clickAddNewAchievementToExistEducation($parent.$index)" class="form-control-static add-button glyphicon glyphicon-plus button"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div ng-if="profile.css.educationEditing" class="addEducation">
                                <h3>{{'ProfilePageAddEducation' | translate}}: <span ng-click="profile.clickDeleteNewEducation()" ng-if="profile.css.addEducationEditing" class="form-control-static remove-button glyphicon glyphicon-minus button"></span><span ng-if="!profile.css.addEducationEditing" ng-click="profile.clickSetEditingState({addEducationEditing: true})" class="form-control-static add-button glyphicon glyphicon-plus button"></span></h3>
                                <div ng-if="profile.css.addEducationEditing">
                                    <div class="form-group" ng-class="{'has-success':schoolForm.school.$dirty&&schoolForm.school.$valid, 'has-error':schoolForm.school.$dirty&&schoolForm.school.$invalid}">
                                        <label for="school" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoCollege' | translate}} :</label>
                                        <div class="col-xs-5">
                                            <input required type="text" ng-model="profile.newEducation.university" name="school" id="school" class="form-control">
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm.school.$dirty && schoolForm.school.$invalid">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="row form-group" ng-class="{'has-success':schoolForm.degree.$dirty&&schoolForm.degree.$valid, 'has-error':schoolForm.degree.$dirty&&schoolForm.degree.$invalid}">
                                        <label for="degree" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoDegree' | translate}} :</label>
                                        <div class="col-xs-5">
                                            <input required type="text" ng-model="profile.newEducation.degree" id="degree" name="degree" class="col-md-2 form-control">
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm.degree.$dirty && schoolForm.degree.$invalid">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="row form-group" ng-class="{'has-success':schoolForm.major.$dirty&&schoolForm.major.$valid, 'has-error':schoolForm.major.$dirty&&schoolForm.major.$invalid}">
                                        <label for="major" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoMajor' | translate}} :</label>
                                        <div class="col-xs-5">
                                            <div class="row">
                                                <p class="col-xs-8 form-control-static">{{profile.newEducation.major | major | translate}}&nbsp;</p>
                                                <div class="col-xs-4"><button class="btn btn-default form-control" ng-click="profile.css.currentMajor=-99">{{'ProfilePageSelectButton' | translate}}</button></div>
                                            </div>
                                            <div muti-select selectfitler="major" datasource="profile.Constant.educationMajor" show="-99 == profile.css.currentMajor"  selectclick="profile.clickHideMutiSelect()" close="profile.clickHideMutiSelect()" ng-model="profile.newEducation.major"></div>
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm.major.$dirty && schoolForm.major.$invalid">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="row form-group" ng-class="{'has-error': schoolForm.entryDate.$dirty && schoolForm.entryDate.$invalid, 'has-success':schoolForm.entryDate.$dirty && schoolForm.entryDate.$valid}">
                                        <label for="entryDate" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoEnterDate' | translate}} :</label>
                                        <div class="col-xs-5">
                                            <input required type="text" data-date-format="yyyy-MM-dd" data-min-date="02/10/70" data-max-date="{{profile.newEducation.graduationDate}}" data-autoclose="1" ng-model="profile.newEducation.entryDate" id="entryDate" name="entryDate" class="form-control" bs-datepicker>
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm.entryDate.$dirty && schoolForm.entryDate.$error.date">{{'ProfilePageDateFormatError' | translate}}</span>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm.entryDate.$dirty && schoolForm.entryDate.$error.required">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="row form-group" ng-class="{'has-error': schoolForm.graduationDate.$dirty && schoolForm.graduationDate.$invalid, 'has-success':schoolForm.graduationDate.$dirty&&schoolForm.graduationDate.$valid}">
                                        <label for="graduationDate" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoGraduationDate' | translate}} :</label>
                                        <div class="col-xs-5">
                                            <input required type="text" data-date-format="yyyy-MM-dd" data-min-date="{{profile.newEducation.entryDate}}" data-autoclose="1" ng-model="profile.newEducation.graduationDate" id="graduationDate" name="graduationDate" class="form-control" bs-datepicker>
                                        </div>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm.graduationDate.$dirty && schoolForm.graduationDate.$error.date">{{'ProfilePageDateFormatError' | translate}}</span>
                                        <span class="err-msg control-label form-control-static col-xs-4" ng-if="schoolForm.graduationDate.$dirty && schoolForm.graduationDate.$error.required">{{'ProfilePageRequiredError' | translate}}</span>
                                    </div>

                                    <div class="form-group">
                                        <label for="abroad" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoAbroad' | translate}} :</label>
                                        <div class="col-xs-9">
                                            <div class="row">
                                                <div class="col-xs-11">
                                                    <textarea placeholder="{{'ProfilePageSchoolInfoAbroadInfo' | translate}}" rows="3" ng-model="profile.newEducation.abroad" name="abroad" id="abroad" class="form-control"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="achievements" class="control-label col-md-3 text-right">{{'ProfilePageSchoolInfoAchievements' | translate}} :</label>
                                        <div class="col-xs-9">
                                            <div class="row" ng-repeat="achievement in profile.newEducation.achievements">
                                                <div class="col-xs-11">
                                                    <!--<input type="text" ng-model="achievement.description" name="achievements{{$index}}" id="achievements{{$index}}" class="form-control">-->
                                                    <textarea rows="3" ng-model="achievement.description" name="achievements{{$index}}" id="achievements{{$index}}" class="form-control"></textarea>
                                                </div>
                                                <div class="col-xs-1">
                                                    <span ng-click="profile.newEducation.achievements.splice($index, 1)" class="form-control-static remove-button glyphicon glyphicon-minus button"></span>
                                                </div>
                                            </div>
                                            <div ng-if="!profile.css.saving" class="row">
                                                <div class="col-xs-11">
                                                    <textarea rows="3" ng-model="profile.newAchievement.description" name="newAchievement" id="newAchievement" class="form-control"></textarea>
                                                </div>
                                                <div class="col-xs-1" ng-if="profile.newAchievement.description">
                                                    <span ng-click="profile.clickAddNewAchievement()" class="form-control-static add-button glyphicon glyphicon-plus button"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div class="profile-detail-title">{{'ProfilePageTabLanguageSkills' | translate}}<span class="profile-edit" ng-click="profile.clickSetEditingState({educationEditing: false, languageEditing: true, addLanguageEditing: false})">{{'ProfilePageEditButton' | translate}}</span></div>
                        <form novalidate name="languageForm" class="form-horizontal">
                            <ul>
                                <li class="form-group added-language" ng-repeat="skill in profile.formData.LanguageSkills">
                                    <span class="col-xs-4">{{skill.language | language | translate}} ({{skill.level | proficiency | translate}})</span>
                                    <span ng-click="profile.clickDeleteLanguage($index)" ng-if="profile.css.languageEditing && !profile.css.addLanguageEditing" class="col-xs-1 form-control-static remove-button glyphicon glyphicon-minus button"></span>
                                </li>
                            </ul>

                            <div ng-if="profile.css.languageEditing">
                                <h3>{{'ProfilePageAddLanguage' | translate}}<span ng-if="!profile.css.addLanguageEditing" ng-click="profile.clickSetEditingState({addLanguageEditing: true})" class="form-control-static add-button glyphicon glyphicon-plus button"></span></h3>
                                <div class="form-group" ng-if="profile.css.addLanguageEditing">
                                    <div class="col-xs-4">
                                        <select class="form-control" ng-model="profile.newLanguageSkill.language" ng-options="language.id as language.name | translate for language in profile.Constant.language">
                                        </select>
                                    </div>
                                    <div class="col-xs-4">
                                        <select class="form-control col-xs-4" ng-model="profile.newLanguageSkill.level" ng-options="level.id as level.name | translate for level in profile.Constant.languageProficiency">
                                        </select>
                                    </div>
                                    <div class="col-xs-4">
                                        <span ng-click="profile.clickAddNewLanguage()" class="form-control-static add-button glyphicon glyphicon-plus button"></span>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div class="row" ng-if="profile.css.educationEditing || profile.css.languageEditing">
                            <!--for edit education-->
                            <div ng-if="profile.css.educationEditing" class="col-md-6 col-md-offset-3 profile-button-container">
                                <button ng-click="profile.clickUpdateUserInfo(schoolForm)" type="submit">{{'ProfilePageSaveButton' | translate}}</button>
                                <button class="cancel" ng-click="profile.clickResetEditingState()">{{'ProfilePageCancelButton' | translate}}</button>
                            </div>
                            <div ng-if="profile.css.languageEditing" class="col-md-6 col-md-offset-3 profile-button-container">
                                <button ng-click="profile.clickUpdateUserInfo(languageForm)" type="submit">{{'ProfilePageSaveButton' | translate}}</button>
                                <button class="cancel" ng-click="profile.clickResetEditingState()">{{'ProfilePageCancelButton' | translate}}</button>
                            </div>
                        </div>
                    </div>

                    <div class="row work-experience" ng-if="profile.css.currentTab == 'experienceInfo'">
                        <profile-work-experience-form current-user="profile.currentUser" update="profile.updateBasicInfo(data)"></profile-work-experience-form>
                        <profile-new-work-experience-form current-user="profile.currentUser" update="profile.updateBasicInfo(data)"></profile-new-work-experience-form>
                    </div>
                    <div class="row work-experience" ng-if="profile.css.currentTab == 'societyExperienceInfo'">
                        <profile-society-experience-form current-user="profile.currentUser" update="profile.updateBasicInfo(data)"></profile-society-experience-form>
                        <profile-new-society-experience-form current-user="profile.currentUser" update="profile.updateBasicInfo(data)"></profile-new-society-experience-form>
                    </div>

                    <div class="row" ng-if="profile.css.currentTab == 'securityInfo'">
                        <profile-change-password-form current-user="profile.currentUser" update="profile.updatePassword(data)"></profile-change-password-form>
                        <profile-mobile-phone-form current-user="profile.currentUser" update="profile.updateBasicInfo(data)" send-phone-verify-code="profile.sendPhoneVerifyCode(code)" get-phone-verify-code="profile.getPhoneVerifyCode()"></profile-mobile-phone-form>
                    </div>

                    <div class="row team-info" ng-if="profile.css.currentTab == 'teamInfo'">
                        <profile-team-form current-user="profile.currentUser" update="profile.updateTeamName(data)" add-student-to-team="profile.addStudentToTeam(username)" remove-student-to-team="profile.removeStudentToTeam(id)" ></profile-team-form>
                    </div>

                </article>
            </section>
        </div>
    </div>


    <% include ../include/footer.ejs %>
    <% include ../include/footerscriptlogin.ejs %>
